<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Machine Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; display: flex; gap: 20px; }
    .section { flex: 1; border: 1px solid #ccc; padding: 10px; border-radius: 8px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    #model-viewer { width: 100%; height: 300px; border: 1px solid #000; }
  </style>
</head>
<body>
  <div class="section">
    <h2>Machine Model</h2>
    <div id="model-viewer">[3D Model Here]</div>
  </div>

  <div class="section">
    <h2>Machine Specs</h2>
    <table id="specs-table">
      <thead><tr><th>Property</th><th>Value</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="section">
    <h2>Live Sensor Data</h2>
    <table id="sensor-table">
      <thead><tr><th>Time</th><th>Temperature</th><th>Vibration</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    async function loadSpecs() {
      const res = await fetch("/api/specs");
      const specs = await res.json();
      const tbody = document.querySelector("#specs-table tbody");
      tbody.innerHTML = "";
      for (const [key, value] of Object.entries(specs)) {
        tbody.innerHTML += `<tr><td>${key}</td><td>${value}</td></tr>`;
      }
    }

    async function loadSensors() {
      const res = await fetch("/api/sensors");
      const sensors = await res.json();
      const tbody = document.querySelector("#sensor-table tbody");
      tbody.innerHTML = "";
      sensors.forEach(s => {
        tbody.innerHTML += `<tr>
          <td>${s.time}</td>
          <td>${s.temperature}</td>
          <td>${s.vibration}</td>
        </tr>`;
      });
    }

    loadSpecs();
    loadSensors();
    setInterval(loadSensors, 3000);
  </script>
</body>
</html>
